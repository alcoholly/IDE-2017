<html>

<head>
  <script src="https://d3js.org/d3.v4.min.js"></script>


  <script type="text/javascript" src="script.js"></script>


  <style>
  body{
    width:1000px;
    margin:auto;
    font-family:Georgia, serif;
  }

  .codeblock{
    font-family:"Courier New", Courier, monospace;
  }

  .bar{
    fill:#b3edef;
    stroke:black;
  }

  .bar:hover{
    stroke:black;
    fill:red;
  }

  .svgplot{
    width:100%;
    height:60%;
  }

  .d3-tip {
  line-height: 1;
  font-weight: bold;
  padding: 12px;
  background: rgba(0, 0, 0, 0.8);
  color: #fff;
  border-radius: 2px;
}


  .line {
    fill: none;
    stroke: steelblue;
    stroke-width: 2px;
  }

  .dot {
    stroke: black;
    fill: green;
  }

  .dot:hover{
    stroke: black;
    fill: blue;
  }

  .legend{
    margin-left:50px;
  }

  div.tooltip {
    position: absolute;
    text-align: center;
    width: 60px;
    height: 28px;
    padding: 2px;
    font: 12px sans-serif;
    background: lightsteelblue;
    border: 0px;
    border-radius: 8px;
    pointer-events: none;
  }


  </style>

</head>

<body>
<h2>Assignment 2</h2>
<br>

<h3>(1) Dot plot of average annual temperatures in St. Petersburg over the years</h3>
<svg id="scatter" class="svgplot"></svg>

<h3>(2) Average temperatures for each season in St. Petersburg over the years </h3>
<div class="legend">
<svg height="25" width="25">
  <circle cx="18" cy="18" r="6" stroke="black"  fill="blue" />
</svg> winter
<svg height="25" width="25">
  <circle cx="18" cy="18" r="6" stroke="black"  fill="green" />
</svg> spring
<svg height="25" width="25">
  <circle cx="18" cy="18" r="6" stroke="black"  fill="red" />
</svg> summer
<svg height="25" width="25">
  <circle cx="18" cy="18" r="6" stroke="black"  fill="brown" />
</svg> autumn
</div>

<svg id="scatter2" class="svgplot"></svg>

<h3>(3) Average temperatures in St. Petersburg by decade</h3>
<svg id="barchart" class="svgplot"></svg>


<h2>Motivation, method, conclusions</h2>

We chose to work with temperature data from St. Petersburg station <a href="https://data.giss.nasa.gov/cgi-bin/gistemp/show_station.cgi?id=638260630000&dt=1&ds=14"> data</a>.<br> The dataset that we downloaded contains surface temperature data for each month and each season of every year from 1880-2017 arranged in columns. The last column contains the average temperature (over all months) for each year. We decided to work with the average year temperature as it captures the central tendency of the data while allowing for a compact visualization of the observations and a direct comparison between different years.
<br><br>
With respect to data preparation - since the dataset that we downloaded was not in proper csv format (the entries are separated by multiple spaces, not comma or tab) -
we normalized it with sed so that it could be read using the d3.csv function:
<br><br>
<span class="codeblock">sed 's/  */,/g' < station.txt > station_normalized.csv</span>
<br><br>
Moreover, we excluded the observations before 1917 as the project description says we should investigate the weather changes for the last 100 years. The last row, that contains the observations for the current year (2017), was also excluded from our analysis since the year is still ongoing and some values are missing. We decided to include three different visualizations: a dot plot of the mean temperature from 1917 to 2016, <i>the second one</i> and a bar chart that shows the average decade temperature for the same year range.
The dot plot was an adaptation of a visualization found online <a href= "https://bl.ocks.org/d3noob/257c360b3650b9f0a52dd8257d7a2d73"> here</a>.<br>
<i>Write something about second visualisation? Same source as first one?</i><br>

  The third visualization is the one we created from scratch (although - in order to learn how to
  do it- we did look on different resources like the lecture notes and the <a href="https://bost.ocks.org/mike/bar/">
  Let's make a bar chart</a> site so there are probably some similarities).
  <br><br>
  While the first visualisation aims to present the observations in more detail, the third one aims to offer a more general picture of the temperature differences over time. For this purpose, we wrote a Python script to compute the mean temperature for each decade from 1917 to 2016 (1917-1926, 1927-1936 etc) and saved it as a .csv file.
  Switching from years to decades allowed us to work with different datasets and not presenting the exact same data twice. It is also worth-mentioning that creating a bar chart for the average temperature per year would not be a good choice since the number of observations marginally does not exceed the conventional
  scale limit of bar charts (tens to <i>hundred</i> categories).

  <br>
  <br>
  (for the other plot where we show every year we can mention that the variation in temperature
  decreases by time)


<h2>Individual part</h2>

<h3>Question 1</h3>
The dataset that we used did not allow us to provide a confident answer to the article's main  question.
We only explored one source of data, i.e. temperature, while <i>weather</i> is described in terms of various conditions -including humidity, precipitation, wind.
By expanding our dataset to include different kinds of observations we would able to address the question more thoroughly.
Another limitation in our approach was that we only used data from one city (St. Petersburg), thus our observations are constrained to this specific area that may not be reflective of the weather changes globally.
Using more global datasets that cover a wide range of geographic locations would allow us to get more accurate estimates of how the weather has changed over the past 100 years.
Lastly it is worth-mentioning that the observed changes in the weather are linked to global warming and human-induced climate changes and it would be enlightening to find datasets that combine weather observations,
with other sources of relevant information (e.g. sea level records, global CO2 emissions records) that would allow us to look for correlations and provide an interpretation of the results.
In terms of visualisation...


<h3>Question 2 (Jesper)</h3>
I wanted to create a chart similar to <a href="http://prcweb.co.uk/img/radial-bar-sample1.png">this</a>
(but years instead of months that the example is using) but didn't manage to find a good example that
I could understand. I think a circular chart like that would not only look good, but it would make it easy
to see the increase for each year, similar to a bar chart. Hovering over a specific year could provide more
detailed information about that year. Buttons to change the type of visualization could also be added to
change the data that is in the chart from temperature to information such as rainfall or even activities that
correlate with the temperature increase, like the amount of carbon dioxide released into the atmosphere.
A function to select a range of years could be a nice feature as well to allow the users to specify themselves
exactly what data to see. <br>
For the bar chart, (3), a nice addition would be to have tooltips that appear on hover, showing the exact
temperature, since you currently only get a hint of the exact temperature; as it is now the bar chart
is better at just showing relative differences between decades.<br>
We also considered adding a regression line to the first plot but didn't manage due to lack of time.

<h3>Question 3 (Jiri)</h3>
Dataset size depends on the complexity of the data <a href="http://square.github.io/crossfilter/">Crossfilter</a> project
for example works with circa 230.000 datapoints. This is a very large number that is only feasible because of the low
complexity of the data (five datapoints per entry).

<h3></h3>

</aside>
</body>




</html>
